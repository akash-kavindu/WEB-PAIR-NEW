<!DOCTYPE html>
<html lang="en">
<head>
Â  <meta charset="UTF-8">
Â  <meta name="viewport" content="width=device-width, initial-scale=1.0">
Â  <title>PAIR CODE</title>
Â  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
Â  <style>
Â  Â  body {
Â  Â  Â  display: flex;
Â  Â  Â  justify-content: center;
Â  Â  Â  align-items: center;
Â  Â  Â  height: 100vh;
Â  Â  Â  margin: 0;
Â  Â  Â  background-color: #141414; /* Dark background */
Â  Â  Â  background-repeat: no-repeat;
Â  Â  Â  background-position: center;
Â  Â  Â  background-size: cover;
Â  Â  Â  font-family: 'Arial', sans-serif;
Â  Â  Â  color: #fff;
Â  Â  }

Â  Â  .container {
Â  Â  Â  display: flex;
Â  Â  Â  flex-direction: column;
Â  Â  Â  align-items: center;
Â  Â  }

Â  Â  .box {
Â  Â  Â  width: 300px;
Â  Â  Â  height: 330px;
Â  Â  Â  padding: 20px;
Â  Â  Â  position: relative;
Â  Â  Â  text-align: center;
Â  Â  Â  background-color: #a20000;
Â  Â  Â  border-radius: 10px;
Â  Â  Â  transform: perspective(1000px) rotateY(0deg);
Â  Â  Â  box-shadow: 0 0 20px rgba(0, 0, 0, 0.7);
Â  Â  Â  position: relative;
Â  Â  }

Â  Â  /* Input and button styles */
Â  Â  #text { color: #ffffff; }
Â  Â  .input-container input { color: #ffffff; }
Â  Â  .centered-text { color: #ffffff; }
Â  Â  
Â  Â  .input-container {
Â  Â  Â  display: flex;
Â  Â  Â  background: #ffffff;
Â  Â  Â  border-radius: 1rem;
Â  Â  Â  padding: 0.3rem;
Â  Â  Â  gap: 0.3rem;
Â  Â  Â  max-width: 300px;
Â  Â  Â  width: 100%;
Â  Â  }

Â  Â  .input-container input {
Â  Â  Â  border-radius: 0.8rem 0 0 0.8rem;
Â  Â  Â  background: #000000;
Â  Â  Â  width: 89%;
Â  Â  Â  flex-basis: 75%;
Â  Â  Â  padding: 1rem;
Â  Â  Â  border: none;
Â  Â  Â  border-left: 2px solid #075e54;
Â  Â  Â  color: #ecf0f1;
Â  Â  Â  transition: all 0.2s ease-in-out;
Â  Â  }

Â  Â  .input-container input:focus {
Â  Â  Â  border-left: 2px solid #075e54;
Â  Â  Â  outline: none;
Â  Â  Â  box-shadow: inset 13px 13px 10px #075e54, inset -13px -13px 10px #2c3e50;
Â  Â  }

Â  Â  .input-container button {
Â  Â  Â  flex-basis: 25%;
Â  Â  Â  padding: 1rem;
Â  Â  Â  background: #25d366;
Â  Â  Â  font-weight: 900;
Â  Â  Â  letter-spacing: 0.3rem;
Â  Â  Â  text-transform: uppercase;
Â  Â  Â  color: white;
Â  Â  Â  border: none;
Â  Â  Â  width: 100%;
Â  Â  Â  border-radius: 0 1rem 1rem 0;
Â  Â  Â  transition: all 0.2s ease-in-out;
Â  Â  }

Â  Â  .input-container button:hover {
Â  Â  Â  background: #2980b9;
Â  Â  }

Â  Â  #waiting-message {
Â  Â  Â  color: #ffffff;
Â  Â  Â  margin-top: 10px;
Â  Â  }

Â  Â  @media (max-width: 500px) {
Â  Â  Â  .input-container {
Â  Â  Â  Â  flex-direction: column;
Â  Â  Â  }

Â  Â  Â  .input-container input {
Â  Â  Â  Â  border-radius: 0.8rem;
Â  Â  Â  }

Â  Â  Â  .input-container button {
Â  Â  Â  Â  padding: 1rem;
Â  Â  Â  Â  border-radius: 0.8rem;
Â  Â  Â  }
Â  Â  }

Â  Â  .centered-text {
Â  Â  Â  text-align: center;
Â  Â  }

Â  Â  /* Add styles for the loading spinner */
Â  Â  #loading-spinner {
Â  Â  Â  display: none;
Â  Â  Â  color: white;
Â  Â  Â  margin-top: 10px;
Â  Â  }

Â  Â  .fa-spinner {
Â  Â  Â  animation: spin 2s linear infinite;
Â  Â  }

Â  Â  @keyframes spin {
Â  Â  Â  0% { transform: rotate(0deg); }
Â  Â  Â  100% { transform: rotate(360deg); }
Â  Â  }
Â  </style>
</head>
<body>
Â  <div class="container">
Â  Â  <div class="main">
Â  Â  Â  <div class="box" id="box">
Â  Â  Â  Â  <div id="text">
Â  Â  Â  Â  Â  <i class="fa fa-user"></i>
Â  Â  Â  Â  Â  <p>
Â  Â  Â  Â  Â  Â  <h3 class="centered-text">Link Robin with phone number</h3>
Â  Â  Â  Â  Â  Â  <br>
Â  Â  Â  Â  Â  Â  <h6>ğŸ”¢ Enter your number with country code. ROBIN WEB PAIR</h6>
Â  Â  Â  Â  Â  Â  <div class="input-container">
Â  Â  Â  Â  Â  Â  Â  <input placeholder="+94704xxxxxx" type="number" id="number" placeholder="â— Enter your phone number with country code, ROBIN WEB PAIR" name="">
Â  Â  Â  Â  Â  Â  Â  <button id="submit">Submit ROBIN</button>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div id="loading-spinner">
Â  Â  Â  Â  Â  Â  Â  <i class="fas fa-spinner fa-spin"></i>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  <br>
Â  Â  Â  Â  Â  Â  <br>
Â  Â  Â  Â  Â  Â  <main id="pair"></main>
Â  Â  Â  Â  Â  </p>
Â  Â  Â  Â  </div>
Â  Â  Â  </div>
Â  Â  </div>
Â  </div>
Â  <script
Â  src="https://cdnjs.cloudflare.com/ajax/libs/axios/1.0.0-alpha.1/axios.min.js"
Â  ></script>
Â  <script>
Â  Â Â 
Â  Â  let a = document.getElementById("pair");
Â  Â  let b = document.getElementById("submit");
Â  Â  let c = document.getElementById("number");

Â  Â  // Copy function is removed as we no longer return a pair code
Â  Â  
Â  Â  b.addEventListener("click", async (e) => {
Â  Â  Â  e.preventDefault();
Â  Â  Â  a.innerHTML = ''; // Clear previous messages
Â  Â  Â  
Â  Â  Â  if (!c.value) {
Â  Â  Â  Â  a.innerHTML = '<a style="color:yellow;font-weight:bold">â—Enter your whatsapp number with country code.</a><br><br>';
Â  Â  Â  } else if (c.value.replace(/[^0-9]/g, "").length < 11) {
Â  Â  Â  Â  a.innerHTML = '<a style="color:yellow;font-weight:bold">â—Invalid number format. Please try again.</a><br><br>';
Â  Â  Â  } else {
Â  Â  Â  Â  // Show the loading spinner and waiting message
Â  Â  Â  Â  document.getElementById("loading-spinner").style.display = "block";
Â  Â  Â  Â  a.innerHTML = '<a style="color:#25d366;font-weight:bold">Connecting... Please wait for the QR code in the terminal.</a>';

Â  Â  Â  Â  const bc = c.value.replace(/[^0-9]/g, "");

Â  Â  Â  Â  // Reformat the number display (optional, can be removed)
Â  Â  Â  Â  let bb = "";
Â  Â  Â  Â  let bbc = "";
Â  Â  Â  Â  const cc = bc.split('');
Â  Â  Â  Â  cc.map(val => {
Â  Â  Â  Â  Â  bbc += val;
Â  Â  Â  Â  Â  if (bbc.length === 3 || bbc.length === 8) {
Â  Â  Â  Â  Â  Â  bb += " " + val;
Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  bb += val;
Â  Â  Â  Â  Â  }
Â  Â  Â  Â  });
Â  Â  Â  Â  c.type = "text";
Â  Â  Â  Â  c.value = "+" + bb;
Â  Â  Â  Â  c.style = "color:white;font-size:20px";
Â  Â  Â  Â  // End reformatting
Â  Â  Â  Â  
Â  Â  Â  Â  // Request the pairing process start
Â  Â  Â  Â  let { data } = await axios(`/code?number=${bc}`);
Â  Â  Â  Â  
Â  Â  Â  Â  // Hide the loading spinner
Â  Â  Â  Â  document.getElementById("loading-spinner").style.display = "none";

Â  Â  Â  Â  if (data.code === "Session Exists") {
Â  Â  Â  Â  Â  Â  a.innerHTML = '<font style="color:yellow;font-weight:bold" size="5">âœ… SESSION ALREADY EXISTS.</font><br><font style="color:white;font-weight:bold" size="3">Delete the /session folder and restart the server to re-pair.</font>';
Â  Â  Â  Â  } else if (data.code === "QR_PENDING") {
Â  Â  Â  Â  Â  Â  // The main QR code generation process started in pair.js
Â  Â  Â  Â  Â  Â  a.innerHTML = '<font style="color:red;font-weight:bold" size="5">ğŸš¨ QR CODE GENERATED ğŸš¨</font><br><font style="color:white;font-weight:bold" size="3">Please **SCAN** the QR code in the **CODESPACES TERMINAL** quickly!</font><br><br><br>';
Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  a.innerHTML = '<font style="color:red;font-weight:bold" size="5">â— FAILED TO START PAIRING.</font><br><font style="color:white;font-weight:bold" size="3">Check terminal logs for errors or try again.</font>';
Â  Â  Â  Â  }
Â  Â  Â  }
Â  Â  });
Â  </script>
</body>
</html>
